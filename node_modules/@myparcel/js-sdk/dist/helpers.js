"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mixin = mixin;
exports.addEndpoint = addEndpoint;

var _client = _interopRequireDefault(require("./client"));

/**
 * Apply the given mixins to the class extending Client.
 *
 * @param {Function} base
 * @param {...Function} mixins
 * @return {*|Client}
 */
function mixin(base) {
  for (var _len = arguments.length, mixins = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    mixins[_key - 1] = arguments[_key];
  }

  return mixins.reduce(function (clss, mixin) {
    return mixin(clss);
  }, base);
}
/**
 * Register a lazy getter for an endpoint.
 *
 * @param {Client} value - A subclass of client.
 * @param {string} property - The name of the property.
 */


function addEndpoint(value, property) {
  Object.defineProperty(_client.default.prototype, property, {
    get: function get() {
      var instance = new value(this); // Shadow the earlier defined property to always return `instance`

      Object.defineProperty(this, property, {
        value: instance,
        writable: false
      });
      return instance;
    }
  });
}